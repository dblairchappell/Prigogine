1) Implement state masks. -- DONE
2) Implement state transitions -- DONE
3) Implement messaging system.
4) Fix issue with state names having to be same length.